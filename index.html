<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>페이지 분할</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>



<!-- [SCRIPT] -->
<script type="module">
  // Firebase SDK 라이브러리 가져오기
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
  import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
  import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

  // Firebase 구성 정보 설정
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyB2_ObMenmN8nzfhNt7c9sG2v-JmmLABw4",
    authDomain: "energizo.firebaseapp.com",
    projectId: "energizo",
    storageBucket: "energizo.appspot.com",
    messagingSenderId: "896594345305",
    appId: "1:896594345305:web:0fc405a876a216d8f42048"
  };

  // Firebase 인스턴스 초기화
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  $("#registeringbtn").click(async function () {
    let doc = { 'image_url': "https://occ-0-1123-1217.1.nflxso.net/dnm/api/v6/6AYY37jfdO6hpXcMjf9Yu5cnmO0/AAAABeIfo7VL_VDyKnljV66IkR-4XLb6xpZqhpLSo3JUtbivnEW4s60PD27muH1mdaANM_8rGpgbm6L2oDgA_iELHZLZ2IQjG5lvp5d2.jpg?r=e6e.jpg",
     'name': "choi", 'age': 24 , 'height': 157, 'weight': 52, 'skillfullness': 5
    };
    await addDoc(collection(db, "player"), doc);
    window.location.reload();
  })

  $("#btnPage1").click(function () {
    $("#page2").hide();
    $("#page1").show();
    $("#btnPage1").css("color", "#000000");
    $("#btnPage2").css("color", "#D7D7D7");
  })

  $("#btnPage2").click(function () {
    $("#page1").hide();
    $("#page2").show();
    $("#btnPage1").css("color", "#D7D7D7");
    $("#btnPage2").css("color", "#000000");
  })

  let docs = await getDocs(collection(db, "player"));
  docs.forEach((doc) => {
    let row = doc.data();

    let image_url = row['image_url'];
    let name = row['name'];
    let height = row['height'];
    let weight = row['weight'];
    let skillfullness = row['skillfullness'];

    let tempCard = `            
            <div class="col">
                <div class="card h-100">
                    <img src="${image_url}"
                        class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">${name}</h5>
                        <p class="card-text">키: ${height}</p>
                        <p class="card-text">몸무게: ${weight}</p>
                        <p class="card-text">실력: ${skillfullness}</p>
                    </div>
                </div>
            </div>
            `
    $('#playerCards').append(tempCard)
    console.log(image_url, name);
  })


</script>



<!-- [CSS] -->
<style>
  body {
    max-width: 1920px;
    margin: 0 auto;
    font-size: 0px;
  }

  .inner {
    max-width: 1550px;
    width: 100%;
    margin: 0 auto;
  }

  .header .header-img {
    position: relative;
  }

  .header .header-img img {
    max-width: 1920px;
    width: 100%;
    opacity: 0.7;
  }

  .header .header-img .h-text-wrapper {
    display: flex;
    position: absolute;
    top: 32%;
    left: 50%;
    transform: translateX(-50%);
    flex-direction: column;
    align-items: center;
  }

  .header .header-img .h-text-wrapper p {
    font-size: 64px;
    font-weight: 800;
    text-align: center;
  }

  .button-wrapper {
    display: flex;
  }

  .button-wrapper .button {
    display: inline-block;
    cursor: pointer;
    font-size: 40px;
  }

  .button-wrapper #btnPage1 {
    font-size: 40px;
    color: #000000;
    margin-right: 50px;
  }

  .button-wrapper #btnPage2 {
    font-size: 40px;
    color: #D7D7D7;
  }

  #page1 {
    display: block;
  }

  #page2 {
    display: none;
  }
</style>

<body>
  <div class="header">
    <div class="header-img">
      <img src="./img/00_header.png">
      <div class="h-text-wrapper">
        <p>Badminton</br>Team Matching System</p>
      </div>
    </div>

    <div class="button-wrapper">
      <div class="button" id="btnPage1">선수 등록</div>
      <div class="button" id="btnPage2">대진표 생성</div>
    </div>
  </div>

  <div id="page1" style="font-size: 20px; color: #000000;">
    선수 등록 코드 작성
    <button id="registeringbtn" type="button">등록하기</button>

    <div class="playerCards">
      <div class="row row-cols-1 row-cols-md-4 g-4" id="playerCards">

      </div>
    </div>
  </div>

  <div id="page2" style="font-size: 20px; color: #000000;">
    대진표 생성 코드 작성
  </div>
</body>

</html>